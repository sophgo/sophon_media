test_data=(
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg "
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_352x288_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_352x288_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_8192x8192_yuv400_planar.jpg"
"JPEG_352x288_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_352x288_yuv420_planar.jpg"
"JPEG_8192x8192_yuv420_planar.jpg"
"JPEG_352x288_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_352x288_yuv422_planar.jpg"
"JPEG_8192x8192_yuv422_planar.jpg"
"JPEG_352x288_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_8192x8192_yuv444_planar.jpg"
"JPEG_720x480_yuv444_planar.jpg"
"JPEG_1280x720_yuv444_planar.jpg"
"JPEG_352x288_yuv400_planar.jpg"
"JPEG_352x288_yuv400_planar.jpg"
"JPEG_720x480_yuv400_planar.jpg"
"JPEG_720x480_yuv400_planar.jpg"
"JPEG_1280x720_yuv400_planar.jpg"
"JPEG_1280x720_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_1920x1088_yuv400_planar.jpg"
"JPEG_2048x1536_yuv400_planar.jpg"
"JPEG_2048x1536_yuv400_planar.jpg"
"JPEG_3840x2160_yuv400_planar.jpg"
"JPEG_3840x2160_yuv400_planar.jpg"
"JPEG_8192x8192_yuv400_planar.jpg"
"JPEG_8192x8192_yuv400_planar.jpg"
"JPEG_352x288_yuv420_planar.jpg"
"JPEG_352x288_yuv420_planar.jpg"
"JPEG_720x480_yuv420_planar.jpg"
"JPEG_720x480_yuv420_planar.jpg"
"JPEG_1280x720_yuv420_planar.jpg"
"JPEG_1280x720_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_1920x1088_yuv420_planar.jpg"
"JPEG_2048x1536_yuv420_planar.jpg"
"JPEG_2048x1536_yuv420_planar.jpg"
"JPEG_3840x2160_yuv420_planar.jpg"
"JPEG_3840x2160_yuv420_planar.jpg"
"JPEG_8192x8192_yuv420_planar.jpg"
"JPEG_8192x8192_yuv420_planar.jpg"
"JPEG_352x288_yuv422_planar.jpg"
"JPEG_352x288_yuv422_planar.jpg"
"JPEG_720x480_yuv422_planar.jpg"
"JPEG_720x480_yuv422_planar.jpg"
"JPEG_1280x720_yuv422_planar.jpg"
"JPEG_1280x720_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_1920x1088_yuv422_planar.jpg"
"JPEG_2048x1536_yuv422_planar.jpg"
"JPEG_2048x1536_yuv422_planar.jpg"
"JPEG_3840x2160_yuv422_planar.jpg"
"JPEG_3840x2160_yuv422_planar.jpg"
"JPEG_8192x8192_yuv422_planar.jpg"
"JPEG_8192x8192_yuv422_planar.jpg"
"JPEG_352x288_yuv444_planar.jpg"
"JPEG_352x288_yuv444_planar.jpg"
"JPEG_720x480_yuv444_planar.jpg"
"JPEG_720x480_yuv444_planar.jpg"
"JPEG_1280x720_yuv444_planar.jpg"
"JPEG_1280x720_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_1920x1088_yuv444_planar.jpg"
"JPEG_2048x1536_yuv444_planar.jpg"
"JPEG_2048x1536_yuv444_planar.jpg"
"JPEG_3840x2160_yuv444_planar.jpg"
"JPEG_3840x2160_yuv444_planar.jpg"
"JPEG_8192x8192_yuv444_planar.jpg"
"JPEG_8192x8192_yuv444_planar.jpg"
"256x144.jpg"
"256x144.jpg"
"426x240.jpg"
"426x240.jpg"
"640x360.jpg"
"640x360.jpg"
"854x480.jpg"
"854x480.jpg"
"1920x1080.jpg"
"1920x1080.jpg"
"3840x2160.jpg"
"3840x2160.jpg"
"3543x2363.jpg"
"4096x4096.jpg"
"5472x3648.jpg"
"3648x5472.jpg"
"11477x7965.jpg"
"7965x11477.jpg"
)
opencv_jpu_case=(
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 6 1 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 1 0 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 5 1 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 5 0 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 1 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 1 0 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 2 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 2 0 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 3 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 3 0 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 4 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 4 0 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 4 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 4 0 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 12 1 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 12 0 0"
"jpumulti 3 JPEG_1920x1088_yuv422_planar.jpg 1000 11 1 0"
"jpumulti 3 JPEG_1920x1088_yuv422_planar.jpg 1000 11 0 0"
"jpumulti 3 JPEG_1920x1088_yuv422_planar.jpg 1000 10 1 0"
"jpumulti 3 JPEG_1920x1088_yuv420_planar.jpg 1000 10 0 0"
"jpumulti 3 JPEG_1920x1088_yuv400_planar.jpg 1000 9 1 0"
"jpumulti 3 JPEG_1920x1088_yuv400_planar.jpg 1000 9 0 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 8 1 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 8 0 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 7 1 0"
"jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 7 0 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 12 1 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 12 0 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 11 1 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 11 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 10 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 10 0 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 9 1 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 9 0 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 12 1 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 12 0 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 11 1 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 11 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 10 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 10 0 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 9 1 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 9 0 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 8 1 0"
"jpumulti 1 JPEG_1920x1088_yuv444_planar.jpg 1000 8 0 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 7 1 0"
"jpumulti 1 JPEG_1920x1088_yuv422_planar.jpg 1000 7 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 6 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 6 0 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 5 1 0"
"jpumulti 1 JPEG_1920x1088_yuv400_planar.jpg 1000 5 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 1 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 1 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 2 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 2 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 3 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 3 0 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 4 1 0"
"jpumulti 1 JPEG_1920x1088_yuv420_planar.jpg 1000 4 0 0"
"test_ocv_jpumulti 3 JPEG_1920x1088_yuv444_planar.jpg 1000 3 1 0"
"test_ocv_jpubasic JPEG_1920x1088_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_352x288_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv400_planar.jpg 1 0 1 0"
"jpubasic JPEG_1920x1088_yuv400_planar.jpg 1 0 1 0"
"jpubasic JPEG_8192x8192_yuv400_planar.jpg 1 1 0 0"
"jpubasic JPEG_352x288_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_8192x8192_yuv420_planar.jpg 100 1 1 0"
"jpubasic JPEG_352x288_yuv422_planar.jpg 100 1 1 0"
"jpubasic JPEG_1920x1088_yuv422_planar.jpg 10 1 1 0"
"jpubasic JPEG_1920x1088_yuv422_planar.jpg 1 1 1 0"
"jpubasic JPEG_352x288_yuv422_planar.jpg 1 1 1 0"
"jpubasic JPEG_8192x8192_yuv422_planar.jpg 1 1 1 0"
"jpubasic JPEG_352x288_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_1920x1088_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_8192x8192_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_720x480_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_1280x720_yuv444_planar.jpg 1 1 1 0"
"jpubasic JPEG_352x288_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_720x480_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_720x480_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1280x720_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1280x720_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1920x1088_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_2048x1536_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_2048x1536_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_3840x2160_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_3840x2160_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_8192x8192_yuv400_planar.jpg 1000 1 1 0"
"jpubasic JPEG_8192x8192_yuv400_planar.jpg 1000 0 1 0"
"jpubasic JPEG_352x288_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_720x480_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_720x480_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1280x720_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1280x720_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1920x1088_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_2048x1536_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_2048x1536_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_3840x2160_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_3840x2160_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_8192x8192_yuv420_planar.jpg 1000 1 1 0"
"jpubasic JPEG_8192x8192_yuv420_planar.jpg 1000 0 1 0"
"jpubasic JPEG_352x288_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_720x480_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_720x480_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1280x720_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1280x720_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1920x1088_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_2048x1536_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_2048x1536_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_3840x2160_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_3840x2160_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_8192x8192_yuv422_planar.jpg 1000 1 1 0"
"jpubasic JPEG_8192x8192_yuv422_planar.jpg 1000 0 1 0"
"jpubasic JPEG_352x288_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_352x288_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_720x480_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_720x480_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1280x720_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1280x720_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_1920x1088_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_1920x1088_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_2048x1536_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_2048x1536_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_3840x2160_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_3840x2160_yuv444_planar.jpg 1000 0 1 0"
"jpubasic JPEG_8192x8192_yuv444_planar.jpg 1000 1 1 0"
"jpubasic JPEG_8192x8192_yuv444_planar.jpg 1000 0 1 0"
"jpubasic 256x144.jpg 1000 1 1 0"
"jpubasic 256x144.jpg 1000 0 1 0"
"jpubasic 426x240.jpg 1000 1 1 0"
"jpubasic 426x240.jpg 1000 0 1 0"
"jpubasic 640x360.jpg 1000 1 1 0"
"jpubasic 640x360.jpg 1000 0 1 0"
"jpubasic 854x480.jpg 1000 1 1 0"
"jpubasic 854x480.jpg 1000 0 1 0"
"jpubasic 1920x1080.jpg 1000 1 1 0"
"jpubasic 1920x1080.jpg 1000 0 1 0"
"jpubasic 3840x2160.jpg 1000 1 1 0"
"jpubasic 3840x2160.jpg 1000 0 1 0"
"jpubasic 3543x2363.jpg 1 1 1 0"
"jpubasic 4096x4096.jpg 1 1 1 0"
"jpubasic 5472x3648.jpg 1 1 1 0"
"jpubasic 3648x5472.jpg 1 1 0 0"
"jpubasic 11477x7965.jpg 1 1 1 0"
"jpubasic 7965x11477.jpg 1 1 1 0"
"jpubasic 128x17458.jpg 1 1 1 0"
)

install_name=dailytest
install_ip=172.28.141.219
install_pass=dailytest
ref_dest=/data

input_dest="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

timeout_duration=1200

install_dir="/home/dailytest/Athena2/Multimedia"
ref_dir=jpeg
check_num=0
ref_md5_filename=opencvjpu_ref_md5.txt


function scp_file()
{

file_addr=$1
name=$2
ipaddres=$3
dest_path=$4
passwd=$5
to_remote=$6

/usr/bin/expect<<-EOF
set cmp 1
if { $to_remote == "1" } {

    spawn sudo scp -r $name@$ipaddres:$file_addr $dest_path

} else {
    spawn sudo scp -r $filename linaro@$ipaddres:$dest_path
}

expect {
  "密码："
        {
          send "$passwd\n"
        }
   "pass"
        {
          send "$passwd\n"
        }
   "yes/no"
        {
          sleep 5
        #   send_user "send yes"
          send "yes\n"
        }
   eof
    {
        sleep 5
        send_user "eof\n"
    }
}

# send "exit\r"
expect eof
EOF
}

compare(){
    line=$1
    num=$2

    check_num=0
    files=($(find . -maxdepth 1 -type f \( -name "out*.jpg" -o -name "*.YUV" -o -name "*.BGR" \)))

    if [[ ${#files[@]} -gt 0 ]];then
        arr1=()
        for file in "${files[@]}";do
            arr1+=("$(basename "$file")")
        done

        for file in "${arr1[@]}"; do
            extension="${file##*.}"
            new_filename="${num}_opencvjpu${check_num}.${extension}"
            sudo mv "$file" "$new_filename"

            md5_src=$(md5sum "$new_filename" | awk '{ print $1 }')
            md5_ref=$(grep "$new_filename" ${ref_dest}/${ref_dir}/${ref_md5_filename} | awk '{print $1}' | head -n 1)

            if [ "$md5_src" == "$md5_ref" ]
            then
                echo "success"
            else
                echo "fail case is $num"
                echo ${line} >> opencvjpudiff.txt
            fi

            rm -rf ${new_filename}
            check_num=$((check_num+1))
        done

    else
        echo "no out file to compare"
    fi
}

function test_start(){
    num=$1
    line=$2

    timeout ${timeout_duration} ${opencv_jpu_case[num]}
    exit_code=$?
    sleep 1
    if [ $exit_code -eq 0 ]; then
        compare "$line" "$num"
    else
        if [ $exit_code -eq 124 ]; then
            echo "Command timed out.$line"
            echo ${line} >> opencvjpufail.txt
        else
            echo "Command encountered an error.$line"
            echo ${line} >> opencvjpufail.txt
            printf "\n" >> opencvjpufail.txt
        fi
    fi
}

function test_all_case(){

    if [ -f "opencvjpufail.txt" ]; then
         rm -rf opencvjpufail.txt
    fi
    if [ -f "opencvjpudiff.txt" ]; then
         rm -rf opencvjpudiff.txt
    fi

    if [ ! -d "${ref_dest}/${ref_dir}" ]; then
        sudo mkdir ${ref_dest}/${ref_dir}
    fi
    find ${ref_dest}/${ref_dir} -name ${ref_md5_filename}
    ret=$?
    if [ ${ret} -ne 0 ]; then
         rm -rf ${ref_md5_filename}
    fi

    scp_file ${install_dir}/${ref_dir}/opencvjpu/${ref_md5_filename} $install_name  $install_ip   ${ref_dest}/${ref_dir}    $install_pass 1

    for ((i=0; i<${#opencv_jpu_case[@]}; i++))
    do

        scp_file ${install_dir}/all_data_opencv_ffmpeg/${test_data[i]}  $install_name  $install_ip   $input_dest   $install_pass 1
        test_start "$i" "${opencv_jpu_case[i]}"
        rm -rf ${input_dest}/${test_data[i]}

    done
    sudo rm -rf ${ref_dest}/${ref_dir}
}

test_all_case







